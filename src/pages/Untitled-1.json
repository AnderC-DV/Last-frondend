{"openapi":"3.1.0","info":{"title":"AuraTech API","version":"0.1.0"},"paths":{"/api/v1/auth/login/check-identifier":{"post":{"tags":["Authentication"],"summary":"Check User Identifier","description":"Endpoint para el primer paso del login.\nVerifica un identificador y devuelve el estado del usuario.","operationId":"check_user_identifier_api_v1_auth_login_check_identifier_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginIdentifierRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckIdentifierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login/first-time":{"post":{"tags":["Authentication"],"summary":"Create Password First Login","description":"Endpoint para que un usuario nuevo autorizado cree su contraseña.","operationId":"create_password_first_login_api_v1_auth_login_first_time_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FirstLoginCreatePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login/token":{"post":{"tags":["Authentication"],"summary":"Login For Access Token","description":"Endpoint para el login de usuarios ya existentes.\nCompatible con el flujo 'password' de OAuth2 para Swagger UI.","operationId":"login_for_access_token_api_v1_auth_login_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_v1_auth_login_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/":{"post":{"tags":["Users"],"summary":"Create User By Admin","description":"Create a new user as an administrator.","operationId":"create_user_by_admin_api_v1_users__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateByAdmin"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Users"],"summary":"Read Users","operationId":"read_users_api_v1_users__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"},"title":"Response Read Users Api V1 Users  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}":{"put":{"tags":["Users"],"summary":"Update User By Admin","operationId":"update_user_by_admin_api_v1_users__user_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateByAdmin"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Users"],"summary":"Delete User","operationId":"delete_user_api_v1_users__user_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/me":{"get":{"tags":["Users"],"summary":"Read User Me","operationId":"read_user_me_api_v1_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/users/me/change-password":{"put":{"tags":["Users"],"summary":"Change Password Me","operationId":"change_password_me_api_v1_users_me_change_password_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordChange"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/users/me/update-cel":{"put":{"tags":["Users"],"summary":"Update Cel Me","description":"Update user's own cel_renovar.\nNota: mantenemos compatibilidad, aunque la fuente canónica será `staff_contacts`.","operationId":"update_cel_me_api_v1_users_me_update_cel_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateCel"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/templates/":{"post":{"tags":["Templates"],"summary":"Crear una nueva plantilla de mensaje","description":"Crea una plantilla (SMS, Email o WhatsApp) y la deja en estado PENDING_INTERNAL_APPROVAL.","operationId":"create_template_api_v1_templates__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/TemplateCreateSMS"},{"$ref":"#/components/schemas/TemplateCreateEmail"},{"$ref":"#/components/schemas/TemplateCreateWhatsApp"}],"title":"Template In"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Templates"],"summary":"Listar todas las plantillas del sistema","operationId":"get_all_templates_api_v1_templates__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Template"},"title":"Response Get All Templates Api V1 Templates  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/{template_id}/internal-approve":{"post":{"tags":["Templates"],"summary":"Aprobar una plantilla internamente","description":"Un usuario autorizado aprueba una plantilla. Si es SMS/Email, pasa a APPROVED. Si es WhatsApp, se envía a Meta y pasa a PENDING_META_APPROVAL.","operationId":"approve_template_internally_api_v1_templates__template_id__internal_approve_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla a aprobar","title":"Template Id"},"description":"ID de la plantilla a aprobar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/{template_id}/internal-reject":{"post":{"tags":["Templates"],"summary":"Rechazar una plantilla internamente","description":"Un usuario autorizado rechaza una plantilla. Pasa a estado REJECTED_INTERNAL.","operationId":"reject_template_internally_api_v1_templates__template_id__internal_reject_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla a rechazar","title":"Template Id"},"description":"ID de la plantilla a rechazar"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateReviewRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/pending-review":{"get":{"tags":["Templates"],"summary":"Listar plantillas pendientes de revisión interna","operationId":"get_pending_templates_api_v1_templates_pending_review_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Template"},"type":"array","title":"Response Get Pending Templates Api V1 Templates Pending Review Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/templates/variables":{"get":{"tags":["Templates"],"summary":"Obtener variables disponibles","description":"Devuelve una lista de todas las variables del 'master' que se pueden usar en las plantillas.","operationId":"get_template_variables_api_v1_templates_variables_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TemplateVariable"},"type":"array","title":"Response Get Template Variables Api V1 Templates Variables Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/templates/{template_id}":{"get":{"tags":["Templates"],"summary":"Obtener una plantilla por su ID","operationId":"get_template_by_id_api_v1_templates__template_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla a obtener","title":"Template Id"},"description":"ID de la plantilla a obtener"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/{template_id}/preview":{"get":{"tags":["Templates"],"summary":"Obtener vista previa de una plantilla","description":"Genera una vista previa de la plantilla, reemplazando las variables\n(ej: `{nombre_completo}`) con datos de un cliente real aleatorio.","operationId":"get_template_preview_api_v1_templates__template_id__preview_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla para previsualizar","title":"Template Id"},"description":"ID de la plantilla para previsualizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplatePreview"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/":{"get":{"tags":["Notifications"],"summary":"Obtener notificaciones del usuario","description":"Obtiene una lista paginada de las notificaciones del usuario actual.","operationId":"get_my_notifications_api_v1_notifications__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Notification"},"title":"Response Get My Notifications Api V1 Notifications  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/unread-count":{"get":{"tags":["Notifications"],"summary":"Obtener conteo de notificaciones no leídas","description":"Devuelve el número de notificaciones no leídas para el usuario actual.","operationId":"get_my_unread_notifications_count_api_v1_notifications_unread_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnreadNotificationsCount"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/notifications/{notification_id}/read":{"patch":{"tags":["Notifications"],"summary":"Marcar una notificación como leída","description":"Marca una notificación específica como leída.","operationId":"mark_notification_as_read_api_v1_notifications__notification_id__read_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"notification_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la notificación a marcar","title":"Notification Id"},"description":"ID de la notificación a marcar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Notification"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/read-all":{"post":{"tags":["Notifications"],"summary":"Marcar todas las notificaciones como leídas y devolver conteo","description":"Marca todas las notificaciones del usuario autenticado como leídas.\n\nDevuelve el conteo actual de no leídas (debe ser 0 tras la operación).","operationId":"mark_all_notifications_as_read_api_v1_notifications_read_all_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnreadNotificationsCount"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/notifications/test-publish":{"post":{"tags":["Notifications"],"summary":"Publicar un evento de notificación de prueba para el usuario actual","description":"Publica un evento 'notification.created' de prueba en el canal del usuario autenticado.\n\nÚtil para validar de extremo a extremo que el frontend recibe eventos por WebSocket.","operationId":"test_publish_notification_api_v1_notifications_test_publish_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/filters":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener todos los filtros de audiencia guardados","operationId":"get_saved_filters_api_v1_audience_filters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AudienceFilter"},"type":"array","title":"Response Get Saved Filters Api V1 Audience Filters Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Audience & Segmentation"],"summary":"Crear y guardar un nuevo filtro de audiencia","operationId":"create_audience_filter_api_v1_audience_filters_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilter"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/count":{"post":{"tags":["Audience & Segmentation"],"summary":"Calcular el tamaño de la audiencia en tiempo real","description":"Recibe un conjunto de reglas y devuelve cuántos clientes coinciden.\nEl sistema validará que todos los `field_name` sean campos válidos y aplicará\nautomáticamente un filtro base si el usuario es un \"Coordinador\".","operationId":"get_audience_count_api_v1_audience_count_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AudienceFilterRuleCreate"},"type":"array","title":"Rules"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceCountResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/available-filters":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener los campos de filtrado disponibles","description":"Devuelve una lista dinámica de todos los campos por los que se puede\nfiltrar una audiencia, extraídos directamente de los modelos de datos\nMasterClient y MasterObligation.","operationId":"get_available_filter_fields_api_v1_audience_available_filters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TemplateVariable"},"type":"array","title":"Response Get Available Filter Fields Api V1 Audience Available Filters Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/filters/distinct-values/{field_name}":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener los valores distintos para un campo de filtrado","description":"Devuelve una lista de los valores únicos (distinct) para un campo específico,\nútil para poblar menús desplegables en la UI.\nSolo funciona para campos de tipo texto.","operationId":"get_distinct_values_for_field_api_v1_audience_filters_distinct_values__field_name__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"field_name","in":"path","required":true,"schema":{"type":"string","title":"Field Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{},"title":"Response Get Distinct Values For Field Api V1 Audience Filters Distinct Values  Field Name  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audience/count/v2":{"post":{"tags":["Audience & Segmentation"],"summary":"Calcular tamaño de audiencia con filtros anidados (V2)","operationId":"get_audience_count_v2_api_v1_audience_count_v2_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterDefinitionV2-Input"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceCountResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/filters/v2":{"post":{"tags":["Audience & Segmentation"],"summary":"Crear y guardar un nuevo filtro (V2) con definición anidada","operationId":"create_audience_filter_v2_api_v1_audience_filters_v2_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterV2Create"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterV2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/filters/v2/{filter_id}":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener un filtro V2 por ID","operationId":"get_audience_filter_v2_api_v1_audience_filters_v2__filter_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"filter_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Filter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterV2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audience/count/simple":{"post":{"tags":["Audience & Segmentation"],"summary":"Calcular tamaño de audiencia (Simple: general AND NOT exclude)","description":"Calcula el tamaño de la audiencia con el modo Simple.\n\nSemántica: resultado = (AND de `general`) AND NOT (OR de grupos `exclude`).\n- Cada grupo en `exclude` combina sus condiciones con AND\n- Los grupos de `exclude` se unen con OR y se aplican con NOT sobre el resultado\n\nEjemplo de cuerpo:\n{\n  \"general\": [\n    {\"field\": \"codigo_del_coordinador\", \"operator\": \"eq\", \"value\": \"jdiaz\"}\n  ],\n  \"exclude\": [\n    [\n      {\"field\": \"resultado_gestor\", \"operator\": \"in\", \"value\": [\"Acuerdo de pago\"]},\n      {\"field\": \"ultima_fecha_gestion_directa\", \"operator\": \"between\", \"value\": [\"2025-08-01\",\"2025-08-31\"]}\n    ]\n  ]\n}","operationId":"get_audience_count_simple_api_v1_audience_count_simple_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceSimpleDefinition"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceCountResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/filters/simple":{"get":{"tags":["Audience & Segmentation"],"summary":"Listar filtros simples (General + Exclude)","description":"Lista filtros guardados con definición Simple (`general` y `exclude`).","operationId":"get_simple_filters_api_v1_audience_filters_simple_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AudienceFilterSimple"},"type":"array","title":"Response Get Simple Filters Api V1 Audience Filters Simple Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Audience & Segmentation"],"summary":"Crear y guardar un filtro simple (General + Exclude)","description":"Crea y guarda un filtro en modo Simple (General + Retiros).\n\n- Valida campos contra la lista blanca de `/available-filters`\n- Persiste `definition` en `audience_filters.definition_json`\n- Responde con el filtro creado en formato Simple","operationId":"create_audience_filter_simple_api_v1_audience_filters_simple_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterSimpleCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterSimple"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/filters/simple/{filter_id}":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener un filtro simple por ID","description":"Obtiene un filtro Simple por su ID.","operationId":"get_simple_filter_by_id_api_v1_audience_filters_simple__filter_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"filter_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Filter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterSimple"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audience/filters/{filter_id}":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener un filtro de audiencia por su ID","operationId":"get_audience_filter_api_v1_audience_filters__filter_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"filter_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Filter Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilter"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/preview":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Get a preview of campaign recipients","description":"Provides a preview of the recipients that a campaign will target based on its configuration.\n\nThis endpoint **does not** create or save the campaign. It's a dry run to verify the audience.","operationId":"preview_campaign_recipients_api_v1_campaigns_preview_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Registros a saltar para paginación.","default":0,"title":"Skip"},"description":"Registros a saltar para paginación."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Máximo de registros a devolver en la previsualización.","default":100,"title":"Limit"},"description":"Máximo de registros a devolver en la previsualización."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PreviewRecipient"},"title":"Response Preview Campaign Recipients Api V1 Campaigns Preview Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/preview/csv":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Descargar CSV de la vista previa de la segmentación","description":"Genera y devuelve un CSV para descarga directa en el navegador con la misma\nlógica del preview (dedupe de contactos, POLITICA redondeada y skip=0).","operationId":"download_preview_csv_api_v1_campaigns_preview_csv_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/campaigns/":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Create and launch a new campaign","description":"Creates, validates, and enqueues a new campaign in a single step.\n\n- If `scheduled_at` is provided, the campaign is scheduled for that time.\n- If `scheduled_at` is null, the campaign is enqueued for immediate execution.","operationId":"create_and_launch_campaign_api_v1_campaigns__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Campaigns (One-Time)"],"summary":"List all campaigns","description":"Retrieves a paginated list of all campaigns, with optional filters.","operationId":"get_all_campaigns_api_v1_campaigns__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Records to skip for pagination.","default":0,"title":"Skip"},"description":"Records to skip for pagination."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum records to return.","default":100,"title":"Limit"},"description":"Maximum records to return."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CampaignStatus"},{"type":"null"}],"description":"Filter by campaign status.","title":"Status"},"description":"Filter by campaign status."},{"name":"channel_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ChannelType"},{"type":"null"}],"description":"Filter by communication channel.","title":"Channel Type"},"description":"Filter by communication channel."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Campaign"},"title":"Response Get All Campaigns Api V1 Campaigns  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/{campaign_id}":{"put":{"tags":["Campaigns (One-Time)"],"summary":"Update a scheduled campaign","description":"Updates the details of a campaign that is currently in 'SCHEDULED' status.\nThis allows for correcting errors or changing strategy before the campaign is sent.\nIt revokes the original scheduled task and creates a new one with the updated information.","operationId":"update_scheduled_campaign_api_v1_campaigns__campaign_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/launch-preview":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Preview the launch of a campaign, checking for excluded contacts.","description":"Provides a preview of a campaign launch, including the number of contacts\nthat will be excluded based on the \"one message per day\" rule.","operationId":"launch_preview_api_v1_campaigns_launch_preview_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/campaigns/stats":{"get":{"tags":["Campaigns (One-Time)"],"summary":"Get campaign aggregated stats from materialized view","operationId":"get_campaign_stats_api_v1_campaigns_stats_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CampaignStats"},"title":"Response Get Campaign Stats Api V1 Campaigns Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/stats/refresh":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Request a concurrent refresh of campaign stats view","operationId":"refresh_campaign_stats_api_v1_campaigns_stats_refresh_post","responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/schedules/":{"post":{"tags":["Campaigns (Recurrent)"],"summary":"Crear una nueva campaña recurrente (Schedule)","description":"Crea una regla para una campaña recurrente.\nEl sistema de Celery Beat leerá estas reglas para lanzar las campañas\nautomáticamente según la `cron_expression`.","operationId":"create_schedule_api_v1_schedules__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignScheduleCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignSchedule"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Campaigns (Recurrent)"],"summary":"Listar todas las campañas recurrentes","description":"Obtiene una lista de todas las reglas de campañas recurrentes configuradas.","operationId":"get_all_schedules_api_v1_schedules__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CampaignSchedule"},"title":"Response Get All Schedules Api V1 Schedules  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}":{"patch":{"tags":["Campaigns (Recurrent)"],"summary":"Actualizar una campaña recurrente","description":"Actualiza los detalles de un schedule. Permite cambiar el nombre,\nla expresión CRON, la plantilla, la audiencia o desactivarlo.","operationId":"update_schedule_api_v1_schedules__schedule_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignScheduleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignSchedule"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Campaigns (Recurrent)"],"summary":"Eliminar una campaña recurrente","description":"Elimina permanentemente una regla de campaña recurrente.","operationId":"delete_schedule_api_v1_schedules__schedule_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}/campaigns":{"get":{"tags":["Campaigns (Recurrent)"],"summary":"Listar campañas generadas por un schedule","description":"Obtiene una lista de todas las campañas que han sido generadas por un schedule recurrente.","operationId":"get_schedule_campaigns_api_v1_schedules__schedule_id__campaigns_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Campaign"},"title":"Response Get Schedule Campaigns Api V1 Schedules  Schedule Id  Campaigns Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/utils/update-employee":{"post":{"tags":["Utilities"],"summary":"Update Master Employee","description":"Updates or creates a master employee record (upsert).\n- Returns 201 Created if a new employee is created.\n- Returns 200 OK if an existing employee is updated.\n- Returns 200 OK with a specific message if no changes are detected.","operationId":"update_master_employee_api_v1_utils_update_employee_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MasterEmployeeUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/utils/employees/{cedula}":{"delete":{"tags":["Utilities"],"summary":"Delete Master Employee","description":"Deletes (hard delete) a master employee record by cedula.","operationId":"delete_master_employee_api_v1_utils_employees__cedula__delete","parameters":[{"name":"cedula","in":"path","required":true,"schema":{"type":"string","title":"Cedula"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/send":{"post":{"tags":["WhatsApp","WhatsApp"],"summary":"Send a WhatsApp message","operationId":"send_message_api_v1_whatsapp_send_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/TextMessage"},{"$ref":"#/components/schemas/TemplateMessage"},{"$ref":"#/components/schemas/InteractiveMessage"},{"$ref":"#/components/schemas/ImageMessage"},{"$ref":"#/components/schemas/AudioMessage"},{"$ref":"#/components/schemas/DocumentMessage"},{"$ref":"#/components/schemas/VideoMessage"},{"$ref":"#/components/schemas/StickerMessage"}],"title":"Message"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/media/upload_from_gcs":{"post":{"tags":["WhatsApp","WhatsApp"],"summary":"Upload media from GCS to Meta and return media_id","operationId":"upload_media_from_gcs_api_v1_whatsapp_media_upload_from_gcs_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaUploadFromGCSRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/message_templates":{"post":{"tags":["WhatsApp","WhatsApp Templates"],"summary":"Create a new message template","description":"Creates a new message template using the account ID from settings.","operationId":"create_template_api_v1_whatsapp_message_templates_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["WhatsApp","WhatsApp Templates"],"summary":"Get message templates","description":"Retrieves a list of message templates for a WhatsApp Business Account.","operationId":"get_templates_api_v1_whatsapp_message_templates_get","parameters":[{"name":"fields","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Comma-separated list of fields to retrieve.","title":"Fields"},"description":"Comma-separated list of fields to retrieve."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","description":"The maximum number of templates to return.","default":10,"title":"Limit"},"description":"The maximum number of templates to return."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TemplateResponse"},"title":"Response Get Templates Api V1 Whatsapp Message Templates Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["WhatsApp","WhatsApp Templates"],"summary":"Delete a message template","description":"Deletes a message template by name or ID.","operationId":"delete_template_api_v1_whatsapp_message_templates_delete","parameters":[{"name":"name","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"The name of the template to delete.","title":"Name"},"description":"The name of the template to delete."},{"name":"hsm_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"The ID of the template to delete.","title":"Hsm Id"},"description":"The ID of the template to delete."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/whatsapp/{whatsapp_message_template_id}":{"post":{"tags":["WhatsApp","WhatsApp Templates"],"summary":"Edit a message template","description":"Edits an existing message template.","operationId":"edit_template_api_v1_whatsapp__whatsapp_message_template_id__post","parameters":[{"name":"whatsapp_message_template_id","in":"path","required":true,"schema":{"type":"string","description":"The ID of the message template.","title":"Whatsapp Message Template Id"},"description":"The ID of the message template."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateDeleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/sms/status":{"post":{"tags":["Webhooks"],"summary":"Receive Sms Status","description":"Endpoint para recibir notificaciones de estado de SMS desde el proveedor.\n\nValida la carga útil y la encola para procesamiento asíncrono.","operationId":"receive_sms_status_api_v1_webhooks_sms_status_post","responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/email/events":{"post":{"tags":["Webhooks"],"summary":"Receive Email Event","description":"Endpoint para recibir eventos de email (ej. enviado, abierto, clic).","operationId":"receive_email_event_api_v1_webhooks_email_events_post","responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/email/failed":{"post":{"tags":["Webhooks"],"summary":"Receive Failed Email Notification","description":"Endpoint para recibir notificaciones de envíos de email que han fallado de forma definitiva.","operationId":"receive_failed_email_notification_api_v1_webhooks_email_failed_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FailedEmailNotification"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/meta/whatsapp":{"get":{"tags":["Webhooks"],"summary":"Verify Webhook","description":"Verifica el endpoint del webhook de Meta.","operationId":"verify_webhook_api_v1_webhooks_meta_whatsapp_get","parameters":[{"name":"hub.mode","in":"query","required":true,"schema":{"type":"string","title":"Hub.Mode"}},{"name":"hub.challenge","in":"query","required":true,"schema":{"type":"integer","title":"Hub.Challenge"}},{"name":"hub.verify_token","in":"query","required":true,"schema":{"type":"string","title":"Hub.Verify Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Webhooks"],"summary":"Receive Meta Notification","description":"Recibe notificaciones de eventos de WhatsApp desde Meta.","operationId":"receive_meta_notification_api_v1_webhooks_meta_whatsapp_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/conversations/":{"get":{"tags":["Conversations"],"summary":"Read Conversations","operationId":"read_conversations_api_v1_conversations__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Conversation"},"title":"Response Read Conversations Api V1 Conversations  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}":{"get":{"tags":["Conversations"],"summary":"Read Conversation","operationId":"read_conversation_api_v1_conversations__conversation_id__get","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/assign/{user_id}":{"post":{"tags":["Conversations"],"summary":"Assign Conversation To User","operationId":"assign_conversation_to_user_api_v1_conversations__conversation_id__assign__user_id__post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}},{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/tags":{"post":{"tags":["Conversations"],"summary":"Add Tag To Conversation","operationId":"add_tag_to_conversation_api_v1_conversations__conversation_id__tags_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Conversation"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/reply":{"post":{"tags":["Conversations"],"summary":"Reply To Conversation","operationId":"reply_to_conversation_api_v1_conversations__conversation_id__reply_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/TextMessage"},{"$ref":"#/components/schemas/TemplateMessage"},{"$ref":"#/components/schemas/InteractiveMessage"},{"$ref":"#/components/schemas/ImageMessage"},{"$ref":"#/components/schemas/AudioMessage"},{"$ref":"#/components/schemas/DocumentMessage"},{"$ref":"#/components/schemas/VideoMessage"},{"$ref":"#/components/schemas/StickerMessage"}],"title":"Message"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reply To Conversation Api V1 Conversations  Conversation Id  Reply Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/reply/audio-from-gcs":{"post":{"tags":["Conversations"],"summary":"Reply With Audio From Gcs","operationId":"reply_with_audio_from_gcs_api_v1_conversations__conversation_id__reply_audio_from_gcs_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaUploadFromGCSRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reply With Audio From Gcs Api V1 Conversations  Conversation Id  Reply Audio From Gcs Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/reply/document-from-gcs":{"post":{"tags":["Conversations"],"summary":"Reply With Document From Gcs","operationId":"reply_with_document_from_gcs_api_v1_conversations__conversation_id__reply_document_from_gcs_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaUploadFromGCSRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reply With Document From Gcs Api V1 Conversations  Conversation Id  Reply Document From Gcs Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/reply/image-from-gcs":{"post":{"tags":["Conversations"],"summary":"Reply With Image From Gcs","operationId":"reply_with_image_from_gcs_api_v1_conversations__conversation_id__reply_image_from_gcs_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaUploadFromGCSRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reply With Image From Gcs Api V1 Conversations  Conversation Id  Reply Image From Gcs Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/reply/video-from-gcs":{"post":{"tags":["Conversations"],"summary":"Reply With Video From Gcs","operationId":"reply_with_video_from_gcs_api_v1_conversations__conversation_id__reply_video_from_gcs_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaUploadFromGCSRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reply With Video From Gcs Api V1 Conversations  Conversation Id  Reply Video From Gcs Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/reply/sticker-from-gcs":{"post":{"tags":["Conversations"],"summary":"Reply With Sticker From Gcs","operationId":"reply_with_sticker_from_gcs_api_v1_conversations__conversation_id__reply_sticker_from_gcs_post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaUploadFromGCSRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reply With Sticker From Gcs Api V1 Conversations  Conversation Id  Reply Sticker From Gcs Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/signed-upload":{"post":{"tags":["Conversations"],"summary":"Create Signed Upload Url","operationId":"create_signed_upload_url_api_v1_conversations_signed_upload_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignedUploadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Signed Upload Url Api V1 Conversations Signed Upload Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/messages/{message_id}/media/meta":{"get":{"tags":["Conversations"],"summary":"Get Message Media Meta","operationId":"get_message_media_meta_api_v1_conversations__conversation_id__messages__message_id__media_meta_get","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Message Media Meta Api V1 Conversations  Conversation Id  Messages  Message Id  Media Meta Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/messages/{message_id}/media":{"get":{"tags":["Conversations"],"summary":"Download Message Media","operationId":"download_message_media_api_v1_conversations__conversation_id__messages__message_id__media_get","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/{conversation_id}/messages/{message_id}/media/signed-url":{"get":{"tags":["Conversations"],"summary":"Get Message Media Signed Url","operationId":"get_message_media_signed_url_api_v1_conversations__conversation_id__messages__message_id__media_signed_url_get","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"integer","title":"Conversation Id"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Message Media Signed Url Api V1 Conversations  Conversation Id  Messages  Message Id  Media Signed Url Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/staff-contacts/":{"put":{"tags":["Staff Contacts"],"summary":"Upsert Staff Contact","operationId":"upsert_staff_contact_api_v1_staff_contacts__put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StaffContactCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StaffContactSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/staff-contacts/bulk":{"post":{"tags":["Staff Contacts"],"summary":"Bulk Upsert Staff Contacts","operationId":"bulk_upsert_staff_contacts_api_v1_staff_contacts_bulk_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_bulk_upsert_staff_contacts_api_v1_staff_contacts_bulk_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/payment-sheets/upload":{"post":{"tags":["Payment Sheets"],"summary":"Upload Payment Sheet","operationId":"upload_payment_sheet_api_v1_payment_sheets_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_payment_sheet_api_v1_payment_sheets_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentSheetIngestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/payment-sheets/enviar-recordatorios-pago":{"post":{"tags":["Payment Sheets"],"summary":"Enviar Recordatorios Pago","description":"Genera una base CSV para recordatorios de pago y la envía por correo.\n- Agrupa `payment_sheet_entries` por `cedula` y suma `valor_pagado` (alias: valor_recuperado_total).\n- Agrupa `proyeccion_data` por `Nit` y suma `valor por recuperar` (alias: valor_por_recuperar_total) y toma la fecha de compromiso más antigua.\n- Segmenta por fecha de compromiso: AYER (< hoy), HOY (== hoy), MAÑANA (== mañana).\n- Permite pasar IDs de plantillas para AYER/HOY/MAÑANA; soportan variables del maestro y {fecha_compromiso}.\n- Calcula `pendiente_pago = valor_por_recuperar_total - valor_recuperado_total`.\n- Excluye si `pendiente_pago` es menor al 10% de `valor_por_recuperar_total`.\n- Envía CSV con columnas: cedula, valor_por_recuperar, valor_recuperado, pendiente_pago, fecha_compromiso, mensaje_a_enviar\n  y opcionalmente telefono_sms (una fila por número activo).","operationId":"enviar_recordatorios_pago_api_v1_payment_sheets_enviar_recordatorios_pago_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"incluir_telefonos","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Incluir Telefonos"}},{"name":"template_ayer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Ayer Id"}},{"name":"template_hoy_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Hoy Id"}},{"name":"template_manana_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Template Manana Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/eps-records/upload":{"post":{"tags":["EPS Records"],"summary":"Upload Eps Records","operationId":"upload_eps_records_api_v1_eps_records_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_eps_records_api_v1_eps_records_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EpsIngestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/work-plans/upload":{"post":{"tags":["Work Plans"],"summary":"Upload Work Plans","operationId":"upload_work_plans_api_v1_work_plans_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_work_plans_api_v1_work_plans_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkPlanIngestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/automations/automations/journeys":{"post":{"tags":["Automations","automations"],"summary":"Create Journey","operationId":"create_journey_api_v1_automations_automations_journeys_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Journey Api V1 Automations Automations Journeys Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Action":{"properties":{"buttons":{"items":{"$ref":"#/components/schemas/app__schemas__whatsapp__Button"},"type":"array","title":"Buttons"}},"type":"object","required":["buttons"],"title":"Action"},"AudienceConditionV2":{"properties":{"field":{"type":"string","title":"Field"},"operator":{"type":"string","enum":["eq","neq","gt","gte","lt","lte","in","not_in","contains","between","is_null","is_not_null"],"title":"Operator"},"value":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Value"}},"type":"object","required":["field","operator"],"title":"AudienceConditionV2"},"AudienceCountResponse":{"properties":{"match_count":{"type":"integer","title":"Match Count"}},"type":"object","required":["match_count"],"title":"AudienceCountResponse","description":"Respuesta para el contador de audiencia en tiempo real."},"AudienceFilter":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"type":"string","format":"uuid","title":"Id"},"rules":{"items":{"$ref":"#/components/schemas/AudienceFilterRule"},"type":"array","title":"Rules","default":[]}},"type":"object","required":["name","id"],"title":"AudienceFilter"},"AudienceFilterCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"rules":{"items":{"$ref":"#/components/schemas/AudienceFilterRuleCreate"},"type":"array","title":"Rules"}},"type":"object","required":["name","rules"],"title":"AudienceFilterCreate"},"AudienceFilterDefinitionV2-Input":{"properties":{"groupsLogic":{"type":"string","enum":["AND","OR"],"title":"Groupslogic","default":"OR"},"filterGroups":{"items":{"$ref":"#/components/schemas/AudienceGroupV2"},"type":"array","title":"Filtergroups"},"globalConditions":{"items":{"$ref":"#/components/schemas/AudienceConditionV2"},"type":"array","title":"Globalconditions","default":[]}},"type":"object","required":["filterGroups"],"title":"AudienceFilterDefinitionV2"},"AudienceFilterDefinitionV2-Output":{"properties":{"groupsLogic":{"type":"string","enum":["AND","OR"],"title":"Groupslogic","default":"OR"},"filterGroups":{"items":{"$ref":"#/components/schemas/AudienceGroupV2"},"type":"array","title":"Filtergroups"},"globalConditions":{"items":{"$ref":"#/components/schemas/AudienceConditionV2"},"type":"array","title":"Globalconditions","default":[]}},"type":"object","required":["filterGroups"],"title":"AudienceFilterDefinitionV2"},"AudienceFilterRule":{"properties":{"field_name":{"type":"string","title":"Field Name","description":"Nombre de la columna en la tabla master_clients."},"operator":{"type":"string","title":"Operator","description":"Operador de comparación. Válidos: GTE, NOT_IN, EQ, NEQ, BETWEEN, CONTAINS, LTE, LT, GT, IS_NULL, IS_NOT_NULL, IN"},"value":{"type":"string","title":"Value","description":"Valor para la comparación. Para 'IN'/'NOT_IN', usar comas: 'val1,val2'."},"id":{"type":"integer","title":"Id"}},"type":"object","required":["field_name","operator","value","id"],"title":"AudienceFilterRule"},"AudienceFilterRuleCreate":{"properties":{"field_name":{"type":"string","title":"Field Name","description":"Nombre de la columna en la tabla master_clients."},"operator":{"type":"string","title":"Operator","description":"Operador de comparación. Válidos: GTE, NOT_IN, EQ, NEQ, BETWEEN, CONTAINS, LTE, LT, GT, IS_NULL, IS_NOT_NULL, IN"},"value":{"type":"string","title":"Value","description":"Valor para la comparación. Para 'IN'/'NOT_IN', usar comas: 'val1,val2'."}},"type":"object","required":["field_name","operator","value"],"title":"AudienceFilterRuleCreate"},"AudienceFilterSimple":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"definition":{"$ref":"#/components/schemas/AudienceSimpleDefinition"}},"type":"object","required":["id","name","definition"],"title":"AudienceFilterSimple"},"AudienceFilterSimpleCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"definition":{"$ref":"#/components/schemas/AudienceSimpleDefinition"}},"type":"object","required":["name","definition"],"title":"AudienceFilterSimpleCreate"},"AudienceFilterV2":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"definition":{"$ref":"#/components/schemas/AudienceFilterDefinitionV2-Output"}},"type":"object","required":["id","name","definition"],"title":"AudienceFilterV2"},"AudienceFilterV2Create":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"definition":{"$ref":"#/components/schemas/AudienceFilterDefinitionV2-Input"}},"type":"object","required":["name","definition"],"title":"AudienceFilterV2Create"},"AudienceGroupV2":{"properties":{"logic":{"type":"string","enum":["AND","OR"],"title":"Logic"},"conditions":{"items":{"$ref":"#/components/schemas/AudienceConditionV2"},"type":"array","title":"Conditions"}},"type":"object","required":["logic","conditions"],"title":"AudienceGroupV2"},"AudienceSimpleDefinition":{"properties":{"general":{"items":{"$ref":"#/components/schemas/AudienceConditionV2"},"type":"array","title":"General","default":[]},"exclude":{"items":{"items":{"$ref":"#/components/schemas/AudienceConditionV2"},"type":"array"},"type":"array","title":"Exclude","default":[]}},"type":"object","title":"AudienceSimpleDefinition","description":"Definición simplificada:\n- general: lista de condiciones combinadas con AND\n- exclude: lista de listas; cada sublista se combina con AND y luego se unen por OR; se excluye el OR total"},"AudioMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"audio","title":"Type"},"audio":{"$ref":"#/components/schemas/AudioObject"}},"type":"object","required":["messaging_product","to","type","audio"],"title":"AudioMessage"},"AudioObject":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"}},"type":"object","title":"AudioObject"},"Body":{"properties":{"type":{"type":"string","const":"BODY","title":"Type","default":"BODY"},"text":{"type":"string","title":"Text","description":"Body text with placeholders like {{1}}, {{2}}."},"example":{"anyOf":[{"$ref":"#/components/schemas/BodyTextExample"},{"type":"null"}],"description":"Example for body variables."}},"type":"object","required":["text"],"title":"Body"},"BodyTextExample":{"properties":{"body_text":{"items":{"items":{"type":"string"},"type":"array"},"type":"array","title":"Body Text","description":"Sample values for body variables."}},"type":"object","required":["body_text"],"title":"BodyTextExample"},"Body_bulk_upsert_staff_contacts_api_v1_staff_contacts_bulk_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"CSV con columnas: adminfo,cel_renovar,extension_3cx,coordinador (separador , o ;)"}},"type":"object","required":["file"],"title":"Body_bulk_upsert_staff_contacts_api_v1_staff_contacts_bulk_post"},"Body_login_for_access_token_api_v1_auth_login_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_api_v1_auth_login_token_post"},"Body_upload_eps_records_api_v1_eps_records_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"CSV con columnas: obligacion, cedula, plan_de_trabajo, tipo_afiliado_eps, eps (puede traer solo un subconjunto)"}},"type":"object","required":["file"],"title":"Body_upload_eps_records_api_v1_eps_records_upload_post"},"Body_upload_payment_sheet_api_v1_payment_sheets_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"CSV de sábana de pagos"}},"type":"object","required":["file"],"title":"Body_upload_payment_sheet_api_v1_payment_sheets_upload_post"},"Body_upload_work_plans_api_v1_work_plans_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"CSV con columnas: obligacion, plan_de_trabajo"}},"type":"object","required":["file"],"title":"Body_upload_work_plans_api_v1_work_plans_upload_post"},"Button-Output":{"properties":{"type":{"type":"string","title":"Type","description":"Button type (QUICK_REPLY, URL, PHONE_NUMBER)."},"text":{"type":"string","title":"Text","description":"Button text."},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url","description":"URL for URL buttons."},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number","description":"Phone number for PHONE_NUMBER buttons."},"example":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Example","description":"Examples for URL variable if present."}},"type":"object","required":["type","text"],"title":"Button"},"Buttons":{"properties":{"type":{"type":"string","const":"BUTTONS","title":"Type","default":"BUTTONS"},"buttons":{"items":{"$ref":"#/components/schemas/app__schemas__templates_meta__Button"},"type":"array","title":"Buttons","description":"List of buttons."}},"type":"object","required":["buttons"],"title":"Buttons"},"Campaign":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo de la campaña."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal de comunicación para la campaña."},"id":{"type":"string","format":"uuid","title":"Id"},"status":{"$ref":"#/components/schemas/CampaignStatus"},"creator":{"$ref":"#/components/schemas/User"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"message_template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Message Template Id"},"audience_filter_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Audience Filter Id"},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"celery_task_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Celery Task Id"},"target_role":{"anyOf":[{"$ref":"#/components/schemas/TargetRole"},{"type":"null"}]},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]}},"type":"object","required":["name","channel_type","id","status","creator","created_at","updated_at"],"title":"Campaign","description":"Esquema completo para devolver una campaña desde la API.\nIncluye todos los campos, relaciones y metadatos."},"CampaignCreate":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo de la campaña."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal de comunicación para la campaña."},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id","description":"ID de la plantilla APROBADA a usar."},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id","description":"ID del filtro de audiencia que define el público."},"target_role":{"$ref":"#/components/schemas/TargetRole","description":"Define el rol del público objetivo de la campaña (DEUDOR o CODEUDOR)."},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}],"description":"Estrategia de envío si el objetivo son los codeudores. Requerido si target_role es CODEUDOR."},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At","description":"Para envíos únicos programados. Si es NULO, se asume envío inmediato."},"source_schedule_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Source Schedule Id","description":"ID del schedule recurrente que origina esta campaña."}},"type":"object","required":["name","channel_type","message_template_id","audience_filter_id","target_role"],"title":"CampaignCreate","description":"Esquema para crear una nueva campaña con todos los datos necesarios,\nincluyendo la selección del público objetivo y la programación."},"CampaignSchedule":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo del schedule."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Descripción opcional."},"cron_expression":{"type":"string","title":"Cron Expression","description":"Expresión CRON válida. Ej: '0 9 * * 1' (Lunes a las 9:00 AM)."},"is_active":{"type":"boolean","title":"Is Active","description":"Indica si el schedule está activo.","default":true},"start_date":{"type":"string","format":"date-time","title":"Start Date","description":"Fecha de inicio de la recurrencia."},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date","description":"Fecha de fin de la recurrencia. Nulo para indefinido."},"channel_type":{"$ref":"#/components/schemas/ChannelType"},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id"},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id"},"target_role":{"$ref":"#/components/schemas/TargetRole"},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]},"id":{"type":"string","format":"uuid","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"last_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Run At"},"next_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Run At"},"created_by_user_id":{"type":"string","format":"uuid","title":"Created By User Id"}},"type":"object","required":["name","cron_expression","channel_type","message_template_id","audience_filter_id","target_role","id","created_at","updated_at","created_by_user_id"],"title":"CampaignSchedule","description":"Esquema completo para devolver un schedule desde la API."},"CampaignScheduleCreate":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo del schedule."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Descripción opcional."},"cron_expression":{"type":"string","title":"Cron Expression","description":"Expresión CRON válida. Ej: '0 9 * * 1' (Lunes a las 9:00 AM)."},"is_active":{"type":"boolean","title":"Is Active","description":"Indica si el schedule está activo.","default":true},"start_date":{"type":"string","format":"date-time","title":"Start Date","description":"Fecha de inicio de la recurrencia."},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date","description":"Fecha de fin de la recurrencia. Nulo para indefinido."},"channel_type":{"$ref":"#/components/schemas/ChannelType"},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id"},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id"},"target_role":{"$ref":"#/components/schemas/TargetRole"},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]}},"type":"object","required":["name","cron_expression","channel_type","message_template_id","audience_filter_id","target_role"],"title":"CampaignScheduleCreate"},"CampaignScheduleUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":150,"minLength":5},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"cron_expression":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cron Expression"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"start_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"message_template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Message Template Id"},"audience_filter_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Audience Filter Id"},"target_role":{"anyOf":[{"$ref":"#/components/schemas/TargetRole"},{"type":"null"}]},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]}},"type":"object","title":"CampaignScheduleUpdate","description":"Esquema para actualizar un schedule. Todos los campos son opcionales."},"CampaignStats":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status"},"channel_type":{"type":"string","title":"Channel Type"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"enviados":{"type":"integer","title":"Enviados"},"entregados":{"type":"integer","title":"Entregados"},"leidos":{"type":"integer","title":"Leidos"}},"type":"object","required":["id","name","status","channel_type","updated_at","enviados","entregados","leidos"],"title":"CampaignStats"},"CampaignStatus":{"type":"string","enum":["DRAFT","PENDING_APPROVAL","SCHEDULED","SENDING","COMPLETED","ERROR","CANCELED"],"title":"CampaignStatus"},"CampaignUpdate":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo de la campaña."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal de comunicación para la campaña."},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id","description":"ID de la plantilla APROBADA a usar."},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id","description":"ID del filtro de audiencia que define el público."},"target_role":{"$ref":"#/components/schemas/TargetRole","description":"Define el rol del público objetivo de la campaña (DEUDOR o CODEUDOR)."},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}],"description":"Estrategia de envío si el objetivo son los codeudores."},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At","description":"Nueva fecha de programación. Si es NULO, se enviará inmediatamente."}},"type":"object","required":["name","channel_type","message_template_id","audience_filter_id","target_role"],"title":"CampaignUpdate","description":"Esquema para actualizar una campaña programada.\nPermite cambiar la plantilla, la audiencia, la fecha y la estrategia."},"ChannelType":{"type":"string","enum":["SMS","WHATSAPP","EMAIL"],"title":"ChannelType"},"CheckIdentifierResponse":{"properties":{"status":{"type":"string","title":"Status"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"}},"type":"object","required":["status"],"title":"CheckIdentifierResponse","description":"Respuesta para el endpoint de verificación."},"CoDebtorStrategy":{"type":"string","enum":["FIRST","ALL"],"title":"CoDebtorStrategy"},"Component-Input":{"properties":{"type":{"type":"string","title":"Type"},"format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Format"},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"example":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Example"},"buttons":{"anyOf":[{"items":{"$ref":"#/components/schemas/app__schemas__templates_meta__Button"},"type":"array"},{"type":"null"}],"title":"Buttons"}},"type":"object","required":["type"],"title":"Component"},"Component-Output":{"properties":{"type":{"type":"string","title":"Type"},"format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Format"},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"example":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Example"},"buttons":{"anyOf":[{"items":{"$ref":"#/components/schemas/Button-Output"},"type":"array"},{"type":"null"}],"title":"Buttons"}},"type":"object","required":["type"],"title":"Component"},"Conversation":{"properties":{"customer_phone_number":{"type":"string","title":"Customer Phone Number"},"status":{"type":"string","title":"Status"},"id":{"type":"integer","title":"Id"},"assigned_to_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"last_client_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Client Message At"},"assigned_to":{"anyOf":[{"$ref":"#/components/schemas/User"},{"type":"null"}]},"tags":{"items":{"$ref":"#/components/schemas/Tag"},"type":"array","title":"Tags","default":[]},"messages":{"items":{"$ref":"#/components/schemas/IncomingMessage"},"type":"array","title":"Messages","default":[]}},"type":"object","required":["customer_phone_number","status","id","assigned_to_id","created_at","updated_at","assigned_to"],"title":"Conversation"},"DocumentMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"document","title":"Type"},"document":{"$ref":"#/components/schemas/DocumentObject"}},"type":"object","required":["messaging_product","to","type","document"],"title":"DocumentMessage"},"DocumentObject":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"}},"type":"object","title":"DocumentObject"},"EpsIngestResult":{"properties":{"rows":{"type":"integer","title":"Rows"},"affected":{"type":"integer","title":"Affected"}},"type":"object","required":["rows","affected"],"title":"EpsIngestResult"},"FailedEmailNotification":{"properties":{"DeliveryId":{"type":"string","title":"Deliveryid"},"CustomerId":{"type":"integer","title":"Customerid"},"Status":{"type":"string","title":"Status"},"Description":{"type":"string","title":"Description"}},"type":"object","required":["DeliveryId","CustomerId","Status","Description"],"title":"FailedEmailNotification","description":"Esquema para notificaciones de envío de email fallido."},"FirstLoginCreatePasswordRequest":{"properties":{"identifier":{"type":"string","title":"Identifier"},"password":{"type":"string","minLength":8,"title":"Password"}},"type":"object","required":["identifier","password"],"title":"FirstLoginCreatePasswordRequest","description":"Esquema para crear la contraseña en el primer login."},"Footer":{"properties":{"type":{"type":"string","const":"FOOTER","title":"Type","default":"FOOTER"},"text":{"type":"string","title":"Text","description":"Footer text."}},"type":"object","required":["text"],"title":"Footer"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Header":{"properties":{"type":{"type":"string","const":"HEADER","title":"Type","default":"HEADER"},"format":{"type":"string","title":"Format","description":"Header format (TEXT, IMAGE, DOCUMENT, VIDEO)."},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text","description":"Header text. Required if format is TEXT."},"example":{"anyOf":[{"$ref":"#/components/schemas/HeaderTextExample"},{"type":"null"}],"description":"Example for header variables."}},"type":"object","required":["format"],"title":"Header"},"HeaderTextExample":{"properties":{"header_text":{"items":{"type":"string"},"type":"array","title":"Header Text","description":"Sample text for the header."}},"type":"object","required":["header_text"],"title":"HeaderTextExample"},"ImageMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"image","title":"Type"},"image":{"$ref":"#/components/schemas/ImageObject"}},"type":"object","required":["messaging_product","to","type","image"],"title":"ImageMessage"},"ImageObject":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"}},"type":"object","title":"ImageObject"},"IncomingMessage":{"properties":{"message_id":{"type":"string","title":"Message Id"},"from_phone_number":{"type":"string","title":"From Phone Number"},"message_type":{"type":"string","title":"Message Type"},"body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Body"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"media_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Media Id"},"media_mime_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Media Mime Type"},"media_sha256":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Media Sha256"},"media_file_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Media File Size"},"storage_bucket":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Storage Bucket"},"storage_object":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Storage Object"},"storage_gs_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Storage Gs Url"},"id":{"type":"integer","title":"Id"},"conversation_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Conversation Id"},"status":{"type":"string","title":"Status"}},"type":"object","required":["message_id","from_phone_number","message_type","timestamp","id","status"],"title":"IncomingMessage"},"InteractiveBodyObject":{"properties":{"text":{"type":"string","title":"Text"}},"type":"object","required":["text"],"title":"InteractiveBodyObject"},"InteractiveMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"interactive","title":"Type"},"interactive":{"$ref":"#/components/schemas/InteractiveObject"}},"type":"object","required":["messaging_product","to","type","interactive"],"title":"InteractiveMessage"},"InteractiveObject":{"properties":{"type":{"type":"string","const":"button","title":"Type"},"body":{"$ref":"#/components/schemas/InteractiveBodyObject"},"action":{"$ref":"#/components/schemas/Action"}},"type":"object","required":["type","body","action"],"title":"InteractiveObject"},"LoginIdentifierRequest":{"properties":{"identifier":{"type":"string","title":"Identifier"}},"type":"object","required":["identifier"],"title":"LoginIdentifierRequest","description":"Esquema para el primer paso del login: identificar al usuario."},"MasterEmployeeUpdate":{"properties":{"cedula":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cedula"},"nombre":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Nombre"},"area":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Area"},"cargo":{"type":"string","maxLength":100,"title":"Cargo"},"jefe_inmediato":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Jefe Inmediato"},"contrato":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Contrato"},"top":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Top"},"temporal":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Temporal"},"estado":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Estado"},"ciudad":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Ciudad"},"usuario_red":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Usuario Red"},"adminfo":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Adminfo"},"extencion_3cx":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Extencion 3Cx"},"cola_3cx":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cola 3Cx"},"asignacion":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Asignacion"},"fecha_ingreso":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Fecha Ingreso"},"fecha_nacimiento":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Fecha Nacimiento"},"fecha_productividad":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Fecha Productividad"},"genero":{"anyOf":[{"type":"string","maxLength":1},{"type":"null"}],"title":"Genero"},"lugar":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Lugar"},"direccion":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Direccion"},"eps":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Eps"},"pensiones":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Pensiones"},"arl":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Arl"},"celular":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Celular"},"correo_renovar":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Correo Renovar"},"correo_personal":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Correo Personal"},"contacto_emergencia":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Contacto Emergencia"},"telefono_emergencia":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Telefono Emergencia"},"hijos_cantidad":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Hijos Cantidad"}},"type":"object","required":["cargo"],"title":"MasterEmployeeUpdate"},"MediaUploadFromGCSRequest":{"properties":{"storage_object":{"type":"string","title":"Storage Object","description":"GCS object name/path inside the configured bucket"},"mime_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mime Type","description":"Optional MIME type override for the upload"}},"type":"object","required":["storage_object"],"title":"MediaUploadFromGCSRequest","description":"Request body to upload a GCS object to Meta as media and obtain a media_id."},"Notification":{"properties":{"message":{"type":"string","title":"Message"},"link_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link Url"},"id":{"type":"string","format":"uuid","title":"Id"},"is_read":{"type":"boolean","title":"Is Read"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"type":{"$ref":"#/components/schemas/NotificationType"}},"type":"object","required":["message","id","is_read","created_at","type"],"title":"Notification","description":"Esquema para devolver una notificación desde la API."},"NotificationType":{"type":"string","enum":["TEMPLATE_APPROVED","TEMPLATE_REJECTED","CAMPAIGN_SCHEDULED","CAMPAIGN_SENDING","CAMPAIGN_COMPLETED","CAMPAIGN_ERROR","GENERIC_INFO"],"title":"NotificationType"},"PasswordChange":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","minLength":8,"title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"PasswordChange","description":"Schema for changing a password."},"PaymentSheetIngestResult":{"properties":{"rows":{"type":"integer","title":"Rows"},"affected":{"type":"integer","title":"Affected"}},"type":"object","required":["rows","affected"],"title":"PaymentSheetIngestResult"},"PreviewRecipient":{"properties":{"nombre_completo":{"type":"string","title":"Nombre Completo"},"contact_info":{"type":"string","title":"Contact Info"},"cedula":{"type":"string","title":"Cedula"}},"type":"object","required":["nombre_completo","contact_info","cedula"],"title":"PreviewRecipient","description":"Esquema para devolver un destinatario en la vista previa de la campaña."},"PreviewResponse":{"properties":{"total_contacts":{"type":"integer","title":"Total Contacts"},"excluded_contacts":{"type":"integer","title":"Excluded Contacts"}},"type":"object","required":["total_contacts","excluded_contacts"],"title":"PreviewResponse"},"Reply":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"}},"type":"object","required":["id","title"],"title":"Reply"},"SignedUploadRequest":{"properties":{"conversation_id":{"type":"integer","title":"Conversation Id"},"content_type":{"type":"string","title":"Content Type"},"kind":{"type":"string","title":"Kind","description":"Subcarpeta: audio|image|video|document|sticker|media","default":"media"},"original_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Filename"}},"type":"object","required":["conversation_id","content_type"],"title":"SignedUploadRequest"},"StaffContactCreate":{"properties":{"adminfo":{"type":"string","maxLength":50,"title":"Adminfo"},"cel_renovar":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cel Renovar"},"extension_3cx":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Extension 3Cx"},"coordinador":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Coordinador"}},"type":"object","required":["adminfo"],"title":"StaffContactCreate"},"StaffContactSchema":{"properties":{"adminfo":{"type":"string","maxLength":50,"title":"Adminfo"},"cel_renovar":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cel Renovar"},"extension_3cx":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Extension 3Cx"},"coordinador":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Coordinador"}},"type":"object","required":["adminfo"],"title":"StaffContactSchema"},"StickerMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"sticker","title":"Type"},"sticker":{"$ref":"#/components/schemas/StickerObject"}},"type":"object","required":["messaging_product","to","type","sticker"],"title":"StickerMessage"},"StickerObject":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"}},"type":"object","title":"StickerObject"},"Tag":{"properties":{"name":{"type":"string","title":"Name"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["name","id"],"title":"Tag"},"TagCreate":{"properties":{"name":{"type":"string","title":"Name"}},"type":"object","required":["name"],"title":"TagCreate"},"TargetRole":{"type":"string","enum":["DEUDOR","CODEUDOR","AMBAS"],"title":"TargetRole"},"Template":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"channel_type":{"$ref":"#/components/schemas/ChannelType"},"status":{"$ref":"#/components/schemas/TemplateStatus"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"components":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Components"},"meta_template_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Template Name"},"meta_template_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Meta Template Id"},"creator":{"$ref":"#/components/schemas/User"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"rejection_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rejection Reason"},"reviewed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Reviewed At"}},"type":"object","required":["id","name","channel_type","status","creator","created_at","updated_at"],"title":"Template"},"TemplateComponent":{"properties":{"type":{"type":"string","title":"Type"},"parameters":{"items":{"$ref":"#/components/schemas/TemplateComponentParameter"},"type":"array","title":"Parameters"}},"type":"object","required":["type","parameters"],"title":"TemplateComponent"},"TemplateComponentParameter":{"properties":{"type":{"type":"string","title":"Type"},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"image":{"anyOf":[{"$ref":"#/components/schemas/ImageObject"},{"type":"null"}]},"video":{"anyOf":[{"$ref":"#/components/schemas/VideoObject"},{"type":"null"}]},"document":{"anyOf":[{"$ref":"#/components/schemas/DocumentObject"},{"type":"null"}]}},"type":"object","required":["type"],"title":"TemplateComponentParameter"},"TemplateCreate":{"properties":{"name":{"type":"string","maxLength":512,"title":"Name","description":"Name of the template."},"category":{"type":"string","title":"Category","description":"Template category (AUTHENTICATION, MARKETING, UTILITY)."},"language":{"type":"string","title":"Language","description":"Language and locale code (e.g., en_US)."},"parameter_format":{"anyOf":[{"type":"string","enum":["POSITIONAL","NAMED"]},{"type":"null"}],"title":"Parameter Format","description":"Format for parameters."},"components":{"items":{"$ref":"#/components/schemas/Component-Input"},"type":"array","title":"Components","description":"Template components."},"allow_category_change":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Allow Category Change","description":"Allow Meta to update the category."}},"type":"object","required":["name","category","language","components"],"title":"TemplateCreate"},"TemplateCreateEmail":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"channel_type":{"type":"string","const":"EMAIL","title":"Channel Type"},"subject":{"type":"string","maxLength":255,"minLength":5,"title":"Subject"},"content":{"type":"string","minLength":10,"title":"Content"}},"type":"object","required":["name","channel_type","subject","content"],"title":"TemplateCreateEmail"},"TemplateCreateSMS":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"channel_type":{"type":"string","const":"SMS","title":"Channel Type"},"content":{"type":"string","minLength":10,"title":"Content"}},"type":"object","required":["name","channel_type","content"],"title":"TemplateCreateSMS"},"TemplateCreateWhatsApp":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"channel_type":{"type":"string","const":"WHATSAPP","title":"Channel Type"},"meta_template_name":{"type":"string","maxLength":512,"pattern":"^[a-z0-9_]+$","title":"Meta Template Name"},"category":{"type":"string","enum":["AUTHENTICATION","MARKETING","UTILITY"],"title":"Category"},"components":{"$ref":"#/components/schemas/WhatsAppTemplateComponents"}},"type":"object","required":["name","channel_type","meta_template_name","category","components"],"title":"TemplateCreateWhatsApp"},"TemplateDeleteResponse":{"properties":{"success":{"type":"boolean","title":"Success"}},"type":"object","required":["success"],"title":"TemplateDeleteResponse"},"TemplateMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"template","title":"Type"},"template":{"$ref":"#/components/schemas/TemplateObject"}},"type":"object","required":["messaging_product","to","type","template"],"title":"TemplateMessage"},"TemplateObject":{"properties":{"name":{"type":"string","title":"Name"},"language":{"additionalProperties":true,"type":"object","title":"Language"},"components":{"anyOf":[{"items":{"$ref":"#/components/schemas/TemplateComponent"},"type":"array"},{"type":"null"}],"title":"Components"}},"type":"object","required":["name","language"],"title":"TemplateObject"},"TemplatePreview":{"properties":{"original_content":{"type":"string","title":"Original Content"},"preview_content":{"type":"string","title":"Preview Content"},"original_subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Subject"},"preview_subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Subject"}},"type":"object","required":["original_content","preview_content"],"title":"TemplatePreview"},"TemplateResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Template ID."},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"Template status (PENDING, APPROVED, REJECTED)."},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"Template category."},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name","description":"Name of the template."},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language","description":"Language of the template."},"components":{"anyOf":[{"items":{"$ref":"#/components/schemas/Component-Output"},"type":"array"},{"type":"null"}],"title":"Components","description":"Components of the template."}},"type":"object","required":["id"],"title":"TemplateResponse"},"TemplateReviewRequest":{"properties":{"approve":{"type":"boolean","title":"Approve"},"rejection_reason":{"anyOf":[{"type":"string","maxLength":500,"minLength":10},{"type":"null"}],"title":"Rejection Reason"}},"type":"object","required":["approve"],"title":"TemplateReviewRequest"},"TemplateStatus":{"type":"string","enum":["DRAFT","PENDING_INTERNAL_APPROVAL","REJECTED_INTERNAL","PENDING_META_APPROVAL","REJECTED_META","APPROVED","REJECTED"],"title":"TemplateStatus"},"TemplateUpdate":{"properties":{"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"New category for the template."},"components":{"anyOf":[{"items":{"anyOf":[{"$ref":"#/components/schemas/Header"},{"$ref":"#/components/schemas/Body"},{"$ref":"#/components/schemas/Footer"},{"$ref":"#/components/schemas/Buttons"}]},"type":"array"},{"type":"null"}],"title":"Components","description":"New components for the template."}},"type":"object","title":"TemplateUpdate"},"TemplateVariable":{"properties":{"variable_name":{"type":"string","title":"Variable Name"},"description":{"type":"string","title":"Description"}},"type":"object","required":["variable_name","description"],"title":"TemplateVariable"},"TextMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"text","title":"Type"},"text":{"$ref":"#/components/schemas/TextObject"}},"type":"object","required":["messaging_product","to","type","text"],"title":"TextMessage"},"TextObject":{"properties":{"preview_url":{"type":"boolean","title":"Preview Url","default":false},"body":{"type":"string","title":"Body"}},"type":"object","required":["body"],"title":"TextObject"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token"},"UnreadNotificationsCount":{"properties":{"count":{"type":"integer","title":"Count"}},"type":"object","required":["count"],"title":"UnreadNotificationsCount","description":"Esquema para devolver el conteo de notificaciones no leídas."},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"adminfo_code":{"type":"string","title":"Adminfo Code"},"cel_renovar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cel Renovar"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["email","adminfo_code","id","created_at"],"title":"User"},"UserCreateByAdmin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"adminfo_code":{"type":"string","title":"Adminfo Code"},"cel_renovar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cel Renovar"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true},"password":{"type":"string","title":"Password"},"role_id":{"type":"integer","title":"Role Id"}},"type":"object","required":["email","adminfo_code","password","role_id"],"title":"UserCreateByAdmin"},"UserUpdateByAdmin":{"properties":{"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"cel_renovar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cel Renovar"}},"type":"object","title":"UserUpdateByAdmin","description":"Schema for updating a user by an admin."},"UserUpdateCel":{"properties":{"cel_renovar":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cel Renovar"}},"type":"object","title":"UserUpdateCel"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VideoMessage":{"properties":{"messaging_product":{"type":"string","const":"whatsapp","title":"Messaging Product"},"recipient_type":{"anyOf":[{"type":"string","const":"individual"},{"type":"null"}],"title":"Recipient Type","default":"individual"},"to":{"type":"string","title":"To"},"type":{"type":"string","const":"video","title":"Type"},"video":{"$ref":"#/components/schemas/VideoObject"}},"type":"object","required":["messaging_product","to","type","video"],"title":"VideoMessage"},"VideoObject":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"}},"type":"object","title":"VideoObject"},"WhatsAppBodyComponent":{"properties":{"text":{"type":"string","maxLength":1024,"title":"Text"},"example":{"anyOf":[{"additionalProperties":{"items":{"items":{"type":"string"},"type":"array"},"type":"array"},"type":"object"},{"type":"null"}],"title":"Example"}},"type":"object","required":["text"],"title":"WhatsAppBodyComponent"},"WhatsAppButton":{"properties":{"type":{"type":"string","enum":["QUICK_REPLY","URL","PHONE_NUMBER"],"title":"Type"},"text":{"type":"string","title":"Text"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"example":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Example"}},"type":"object","required":["type","text"],"title":"WhatsAppButton"},"WhatsAppFooterComponent":{"properties":{"text":{"type":"string","maxLength":60,"title":"Text"}},"type":"object","required":["text"],"title":"WhatsAppFooterComponent"},"WhatsAppHeaderComponent":{"properties":{"format":{"type":"string","enum":["TEXT","IMAGE","VIDEO","DOCUMENT","LOCATION"],"title":"Format"},"text":{"anyOf":[{"type":"string","maxLength":60},{"type":"null"}],"title":"Text"},"example":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Example"},"gcs_object_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gcs Object Name","description":"GCS object path to fetch media for header handle generation."},"file_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Name","description":"Original filename for handle session."},"mime_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mime Type","description":"MIME type for handle session."}},"type":"object","required":["format"],"title":"WhatsAppHeaderComponent"},"WhatsAppTemplateComponents":{"properties":{"header":{"anyOf":[{"$ref":"#/components/schemas/WhatsAppHeaderComponent"},{"type":"null"}]},"body":{"$ref":"#/components/schemas/WhatsAppBodyComponent"},"footer":{"anyOf":[{"$ref":"#/components/schemas/WhatsAppFooterComponent"},{"type":"null"}]},"buttons":{"anyOf":[{"items":{"$ref":"#/components/schemas/WhatsAppButton"},"type":"array"},{"type":"null"}],"title":"Buttons"}},"type":"object","required":["body"],"title":"WhatsAppTemplateComponents"},"WorkPlanIngestResult":{"properties":{"rows":{"type":"integer","title":"Rows"},"affected":{"type":"integer","title":"Affected"}},"type":"object","required":["rows","affected"],"title":"WorkPlanIngestResult"},"app__schemas__templates_meta__Button":{"properties":{"type":{"type":"string","title":"Type","description":"Button type (QUICK_REPLY, URL, PHONE_NUMBER)."},"text":{"type":"string","title":"Text","description":"Button text."},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url","description":"URL for URL buttons."},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number","description":"Phone number for PHONE_NUMBER buttons."},"example":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Example","description":"Examples for URL variable if present."}},"type":"object","required":["type","text"],"title":"Button"},"app__schemas__whatsapp__Button":{"properties":{"type":{"type":"string","const":"reply","title":"Type"},"reply":{"$ref":"#/components/schemas/Reply"}},"type":"object","required":["type","reply"],"title":"Button"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login/token"}}}}}}